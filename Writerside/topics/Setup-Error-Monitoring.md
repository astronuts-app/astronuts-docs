# Setup 
{category="erm"}

To setup **[Error monitoring](Error-monitoring.md)** for your application, take the following steps.
This example assumes that you write log messages in your applications. Astronuts provides [client side libraries](Error-monitoring-libraries.md) to send your log messages to Astronuts for real-time resolutions.

## Pre-requisites {id="error-monitoring-pre-requisites"}

Complete the following first, depending on the tools you use.

* [Signup](Signup.md) and create an account on Astronuts.
* [Connect your Slack workspace](Connect-Slack.md) with Astronuts.}
* [Connect your GitHub repositories](Connect-Git-Repositories.md) with Astronuts.
* [Setup AI training](Setup-AI-Training.md) for your repositories.

<tip>
    <p>
        If some or all of the above mentioned steps do not apply to you, you may still be able to get real-time resolutions for errors observed in your application server logs. In that case the resolutions generated by Astronuts will not be able to factor in contextual information specific to your codebase or context. 
    </p>
    <p>
    You can progressively connect your tools and processes with Astronuts to get more accurate resolutions for errors observed in your application server logs.
    </p>
</tip>

<procedure title="Setup Error Monitoring" id="setup-error-monitoring">
    <step>
        <p>Access your <a href="https://dashboard.astronuts.io/"><b>Dashboard</b></a> or open a browser window and go to https://dashboard.astronuts.io/.</p>
        <img src="account-dashboard.png" alt="start dashboard" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>Navigate to <b>Error Monitoring | Apps</b> from the sidebar menu.</p>
        <img src="error-monitoring-setup-apps.png" alt="error monitoring setup app" border-effect="line" 
            width="321" thumbnail="true"/>
    </step>
    <step>
        <p>To setup error monitoring for your application running in production, click on <b>Add app</b>.</p>
        <img src="error-monitoring-add-app.png" alt="error monitoring add new app" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>Provide a name for your application, and a description. Click <b>Create</b></p>
        <tip>
            <p>
                You can add multiple apps. It is recommended to add an app for each of your applications running in production.
            </p>
        </tip>
        <img src="err-monitoring-add-app-create.png" alt="error monitoring add new app create" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>You will get a confirmation that the app was created.</p>
        <img src="app-created-confirmation.png" alt="error monitoring app creation confirmation" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>Your newly created app will be listed in the table of apps. From the context menu, click on <b>Add file</b></p>.
        <img src="err-monitoring-add-file.png" alt="error monitoring add file" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>Setup a new file for error monitoring by providing a file name, description and source system.</p>
        <tip>
            <p>
                The <b>Source system</b> is an informational field, and you can select any value you wish to if your source system does not appear. It does not limit your ability to setup error monitoring.
            </p>
        </tip>
        <img src="err-monitoring-create-new-file.png" alt="error monitoring create file" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step id="get-secret-file-key">
        <p>The file will be configured for error monitoring, and you will get a confirmation.</p>
        <p>Click on the clipboard icon beside the <b>Secret file key</b> field to get your secret file key. You will use this in a later step. This key is confidential and must not be checked into version control or shared with unauthorized personnel. You can rotate the key from the context menu
        </p>
        <img src="add-file-confirmation.png" alt="error monitoring add file confirmation" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>Depending on the logging framework you are using in your application, choose a <a href="Error-monitoring-libraries.md" summary="Error monitoring libraries">client side library</a> suitable for your programming language, and logging framework.</p>
        <p>All client side libraries for error monitoring are open source and are maintained by Astronuts at <a href="https://github.com/astronuts-app/log-monitoring" summary="Astronuts error monitoring libraries">https://github.com/astronuts-app/log-monitoring</a>. We welcome your pull requests.</p>
        <tip>
            <p>
                If you don't find the library that you need for your application, check the <a href="https://github.com/astronuts-app/astronuts-tracker/milestones" summary="Astronuts roadmap">Astronuts roadmap</a> or create an issue in the <a href="https://github.com/astronuts-app/astronuts-tracker/issues" summary="Astronuts issue tracker">Astronuts tracker</a>.
            </p>
            <p>
                If you want to contribute a library, please see the <a href="Open-source.md">open source contribution guidelines</a>.
            </p>
        </tip>
        <img src="err-monitoring-open-source-libs.png" alt="error monitoring open source libraries" border-effect="line" width="321" thumbnail="true"/>
    </step>
    <step>
        <p>In this example, we will use the <a href="https://logback.qos.ch/" summary="Logback"><b>Logback</b></a> appender to ship your error log messages to Astronuts.</p>
        <p><b>Add</b> the <a href="https://central.sonatype.com/artifact/io.astronuts/log-monitoring-logback/overview" summary="Astronuts log monitoring logback library">astronuts log monitoring logback library</a> <b>dependency</b> to your build file. Depending on your build system (e.g., Maven or Gradle), you would need to specify the dependency according to your build tool.</p>
        <p>All java libraries for log monitoring are published to Maven Central. For example, the log monitoring logback library is available in <a href="https://central.sonatype.com/artifact/io.astronuts/log-monitoring-logback/overview" summary="Astronuts log monitoring logback library">Maven Central</a>.</p>
        <tabs>
            <tab id="maven" title="Maven">
                <code-block lang="xml">
                    <![CDATA[
                        <dependency>
                            <groupId>io.astronuts</groupId>
                            <artifactId>log-monitoring-logback</artifactId>
                            <version>0.1.0</version>
                        </dependency>
                    ]]>
                </code-block>
            </tab>
            <tab id="gradle" title="Gradle">
                <code-block lang="gradle">
                    implementation 'io.astronuts:log-monitoring-logback:0.1.0'
                </code-block>
            </tab>
        </tabs>
    </step>
    <step>
        <p>Add the <a href="https://github.com/astronuts-app/log-monitoring/tree/main/log-monitoring-logback" summary="Astronuts log monitoring Logback appender">Astronuts log monitoring Logback appender</a> to your Logback configuration file.</p>
        <code-block lang="xml">
            <![CDATA[
            <appender name="ASTRONUTS" class="io.astronuts.monitoring.logback.appender.AstronutsAppender"/>
            <logger name="your.package.name" level="INFO" additivity="false">
                <appender-ref ref="ASTRONUTS"/>
            </logger>
            ]]>
        </code-block>
        <note>
            <p>
                Replace <b><code>your.package.name</code></b> with your actual package name or fully qualified class name.
            </p>
        </note>
        <tip>
            <p>
                The way you use a particular client side library to ship your error log messages to Astronuts is library-specific. Please check the README files in the respective modules at <a href="https://github.com/astronuts-app/log-monitoring" summary="Astronuts log monitoring libraries">https://github.com/astronuts-app/log-monitoring</a>.
            </p>
        </tip>
    </step>
    <step>
        <p>Inject your <a href="" summary="Get the secret file key you obtained earlier" anchor="get-secret-file-key"><b>Secret file key</b></a> into your application process. There ar multiple ways to do this</p>
        <tabs>
            <tab id="env-var" title="Environment variable">
                Depending on how you execute your application in your production environment, export this environment variable
                <code-block lang="bash">
                    export ASTRONUTS_LOGFILE_SECRET=your-secret-file-key
                </code-block>
                <note>
                    <p>Replace <b><code>your-secret-file-key</code></b> with the secret file key you obtained earlier.</p>
                </note>
            </tab>
            <tab id="system-variable" title="System variable">
                You can pass the secret file key as a system property when you start your application using the <code>-Dastronuts.logfile.secret</code> flag.
            </tab>
        </tabs>
    </step>
    <step>
        <p>Restart your application so that the secret key is identified.</p>
    </step>
    <step>
        <p>To test the configuration, you can simulate an error so that a log message is logged at an <code>ERROR</code>.</p>
        <tip>
            <p>
                The Astronuts log monitoring logback library does not process any log messages below the <code>ERROR</code> level.
            </p>
        </tip>
    </step>
    <step>
        <p>If you have the <a href="Slack-app.md">Astronuts Slack app</a> installed, you will see a real time resolution.</p>
        <img src="error-monitoring-slack.png" alt="error monitoring on slack" border-effect="line" width="321" thumbnail="true"/>
        <p>Real-time error resolutions are also available in your dashboard. You can access them from <b>Error Monitoring | Events.</b></p>
        <img src="error-monitoring-event-dashboard.png" alt="error monitoring event dashboard" border-effect="line" width="321" thumbnail="true"/>
        <tip>
            <p>
                The Astronuts log monitoring logback library does not process any log messages below the <code>ERROR</code> level.
            </p>
        </tip>
    </step>
</procedure>